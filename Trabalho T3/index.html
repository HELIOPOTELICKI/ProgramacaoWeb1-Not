<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <script>
        function CreateTableFromJSON(data) {
            var myData = data
            var col = [];
            for (var i = 0; i < myData.length; i++) {
                for (var key in myData[i]) {
                    if (col.indexOf(key) === -1) {
                        col.push(key);
                    }
                }
            }
    
            var table = document.createElement("table");
            var tr = table.insertRow(-1);
    
            var headT = ["ID", "Nome", "Salário", "Idade", "Avatar", "Ações"];
            for (var i = 0; i < headT.length; i++) {
                var th = document.createElement("th");
                th.innerHTML = headT[i];
                tr.appendChild(th);
            }
    
            for (var i = 0; i < myData.length; i++) {
    
                tr = table.insertRow(-1);
    
                for (var j = 0; j < col.length; j++) { 
                    if (j == col.length-1){
                        var tabCell = tr.insertCell(-1);
                        if (myData[i][col[j]] == null){
                            tabCell.innerHTML = '<img src="https://uploaddeimagens.com.br/images/002/704/944/full/Avatar-Default.png?1592020730" width="50" height="50">';
                        }else{
                            tabCell.innerHTML = '<img src="'+myData[i][col[j]]+'" width="50" height="50">';
                        }
                    }else{
                        if (j == col.length-3){
                            var tabCell = tr.insertCell(-1);
                            tabCell.innerHTML = parseFloat(myData[i][col[j]]).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                        }else{
                            var tabCell = tr.insertCell(-1);
                            tabCell.innerHTML = myData[i][col[j]];
                        }
                    }
                    if (j == col.length-1){
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = "Editar | Excluir";
                    }
                }
            }
            var divContainer = document.getElementById("showData");
            divContainer.innerHTML = "";
            divContainer.appendChild(table);
        }

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4){ 
                if (this.status == 200){
                    var dataReturned = JSON.parse(this.responseText);
                    CreateTableFromJSON(dataReturned.data);
                }
            }
        };

        xhttp.open("GET", "https://us-central1-rest-api-employees.cloudfunctions.net/api/v1/employees", true);
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
    </script>
<p id="showData"></p>
</body>
</html>